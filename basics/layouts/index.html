<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Middleman: Layouts</title>
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Source+Code+Pro">
    <link href="/stylesheets/site.css" rel="stylesheet" />
  </head>
  <body>
      <header id="header">
    <nav class="global-nav" role="navigation">
  <section class="wrap-container">
    <header class="global-nav-item logo-text">
      <a class="global-nav-middleman-signature" href="/">Middleman</a>
      <a class="global-nav-middleman-logo" href="/"><img src="/images/middleman-logo.svg" /></a>
    </header>

    <ul class="global-nav-list">
      <li class="global-nav-item">
        <a href="/community/">Contribute</a>
      </li>
      <li class="global-nav-item">
        <a class="cta-link-nav" href="/basics/install/">Docs</a>
      </li>
    </ul>
  </section>
</nav>

  </header>

  <div class="body-content-container wrap-container" role="main">
    <nav id="toc" class="sidebar" data-waypoint="sidebar">
      <div id="search" role="search">
  <form>
    <input class="st-search-input" id="st-search-input" type="search" placeholder="Search the docs">
  </form>
  <div id="st-results-container"></div>
  <script>
    var Swiftype = window.Swiftype || {};
    (function() {
    Swiftype.key = 'q3qjGN5LmX2oq6w1V47y';
    Swiftype.inputElement = '#st-search-input';
    Swiftype.resultContainingElement = '#st-results-container';
    Swiftype.attachElement = '#st-search-input';
    Swiftype.renderStyle = "overlay";

    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.async = true;
    script.src = "//swiftype.com/embed.js";
    var entry = document.getElementsByTagName('script')[0];
    entry.parentNode.insertBefore(script, entry);
    }());
  </script>
</div>

<div class="toc-block-container">
  <div class="toc-block">
    <h3 class="docs-section-heading">Basics</h3>
    <ul>
      <li class="doc-item">
        <a href="/basics/install/">Install</a> </li>
      <li class="doc-item">
        <a href="/basics/upgrade-v4/">Upgrading to v4</a> </li>
      <li class="doc-item">
        <a href="/basics/start_new_site/">Start a New Site</a>
      </li>
      <li class="doc-item">
        <a href="/basics/directory-structure/">Directory Structure</a>
      </li>
      <li class="doc-item" >
        <a href="/basics/development_cycle/">Development Cycle</a>
      </li>
      <li class="doc-item">
        <a href="/basics/build_and_deploy/">Build & Deploy</a>
        </li>
      <li class="doc-item">
        <a href="/basics/frontmatter/">Frontmatter</a>
        </li>
      <li class="doc-item">
        <a href="/basics/templating_language/">Templating Language</a>
        </li>
      <li class="doc-item">
        <a href="/basics/helper_methods/">Helper Methods</a>
        </li>
      <li class="doc-item">
        <a href="/basics/layouts/">Layouts</a>
        </li>
      <li class="doc-item">
        <a href="/basics/partials/">Partials</a>
        </li>
      <li class="doc-item">
        <a href="/basics/blogging/">Blogging</a>
        </li>
    </ul>
  </div>

  <div class="toc-block">
    <h3 class="docs-section-heading">Advanced</h3>
    <ul>
      <li class="doc-item">
        <a href="/advanced/configuration/">Configuring Your Site</a>
        </li>
      <li class="doc-item">
        <a href="/advanced/project_templates/">Project Templates</a>
        </li>
      <li class="doc-item">
        <a href="/advanced/dynamic_pages/">Dynamic Pages</a>
        </li>
      <li class="doc-item">
        <a href="/advanced/data_files/">Data Files</a>
        </li>
      <li class="doc-item">
        <a href="/advanced/localization/">Localization (i18n)</a>
        </li>
      <li class="doc-item">
        <a href="/advanced/asset_pipeline/">Asset Pipeline</a>
        </li>
      <li class="doc-item">
        <a href="/advanced/rack_middleware/">Rack Middleware</a>
        </li>
      <li class="doc-item">
        <a href="/advanced/sitemap/">The Sitemap</a>
        </li>
      <li class="doc-item">
        <a href="/advanced/pretty_urls/">Pretty URLs (Directory Indexes)</a>
        </li>
      <li class="doc-item">
        <a href="/advanced/improving_cacheability/">Improving Cacheability</a>
        </li>
      <li class="doc-item">
        <a href="/advanced/file_size_optimization/">File Size Optimization</a>
        </li>
      <li class="doc-item">
        <a href="/advanced/custom_extensions/">Custom Extensions</a>
        </li>
    </ul>
  </div>

  <div class="toc-block">
    <h3 class="docs-section-heading">Open-Source Community</h3>
    <ul>
      <li class="doc-item">
        <a href="https://directory.middlemanapp.com/#/extensions/all/">Custom Extensions</a>
      </li>
      <li class="doc-item">
        <a href="https://directory.middlemanapp.com/#/templates/all/">Project Templates</a>
        </li>
      <li class="doc-item">
        <a href="https://directory.middlemanapp.com/#/extensions/deployment/">Deployment Solution</a>
        </li>
      <li class="doc-item">
        <a target="_blank" href="https://forum.middlemanapp.com/">Community Forum</a>
        </li>
      <li class="doc-item">
        <a target="_blank" href="https://github.com/middleman/middleman">GitHub Repository</a>
        </li>
      <li class="doc-item">
        <a href="/community/built_using_middleman/">Sites Built Using Middleman</a>
        </li>
    </ul>
  </div>
</div>

    </nav>

    <main class="main" role="main" data-waypoint="main">
      <h1 id="layouts">Layouts</h1>

<p>Layouts allow the common HTML surrounding individual pages to be shared across
all your templates. Developers coming from PHP will be used to the concept of
&quot;header&quot; and &quot;footer&quot; includes which they reference at the top and bottom of
every page. The Ruby world, and Middleman, take an inverse approach. The
&quot;layout&quot; includes both the header and footer and then wraps the individual page
content.</p>

<p>The most basic layout has some shared content and a <code>yield</code> call where
templates will place their contents.</p>

<p>Here is an example layout using ERb:</p>

<pre><code class="html">&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;My Site&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;%= yield %&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Given a page template in ERb:</p>

<pre><code class="html">&lt;h1&gt;Hello World&lt;/h1&gt;
</code></pre>

<p>The combined final output in HTML will be:</p>

<pre><code class="html">&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;My Site&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;Hello World&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Regarding file extensions and parsers, layouts have a different function from
templates in the building process, so care should be taken in giving them the
right extension. Here is why:</p>

<p>As you might have gathered from the section on templates, file extensions are
significant. For example, naming a layout file <code>layout.html.erb</code> would tell the
language parser that it should take this file, which is erb and turn it into
html.</p>

<p>In a sense, reading the extensions from right to left, will tell you the
parsings that the file will undergo, ending up as a file in the format of the
leftmost extension. In the case of the example, converting an erb file to an
html file when serving, and when building the file.</p>

<p>Unlike templates, layouts should not be rendered to html. Giving a layout file
the leftmost extension <code>.html</code> will cause an error when building. Therefore,
you should stick to the template language extension only, i.e.: <code>layout.erb</code>.</p>

<h2 id="custom-layouts">Custom Layouts</h2>

<p>By default, Middleman will use the same layout file for every page in your
site. However, you may want to use multiple layouts and specify which pages use
these other layouts. For example, you may have a &quot;public&quot; site and an &quot;admin&quot;
site which would each have their own layout files.</p>

<p>The default layout file lives in the <code>source</code> folder and is called &quot;layout&quot; and
has the extension of the templating language you are using. The default is
<code>layout.erb</code>. Any alternate layouts you create should live in <code>source/layouts</code></p>

<p>To create a new layout for admin, add another file to your <code>source/layouts</code>
folder called &quot;admin.erb&quot;. Let&#39;s assume the contents are:</p>

<pre><code class="html">    &lt;html&gt;
    &lt;head&gt;
      &lt;title&gt;Admin Area&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
      &lt;%= yield %&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre>

<p>Now, you need to specify which pages use this alternative layout. You can do
this in two ways. If you want to apply this layout to a large group of pages,
you can use the &quot;page&quot; command in your <code>config.rb</code>. Let&#39;s assume you have a
folder called &quot;admin&quot; in your <code>source</code> folder and all the templates in admin
should use the admin layout. The <code>config.rb</code> would look like:</p>

<pre><code class="ruby">page &quot;/admin/*&quot;, :layout =&gt; &quot;admin&quot;
</code></pre>

<p>This uses a wildcard in the page path to specify that any page under the admin
folder should use the admin layout.</p>

<p>You can also reference pages directly. For example, let&#39;s say we have a
<code>login.html.erb</code> template which lives in the source folder, but should also
have the admin layout. Let&#39;s use this example page template:</p>

<pre><code class="html">&lt;h1&gt;Login&lt;/h1&gt;
&lt;form&gt;
  &lt;input type=&quot;text&quot; placeholder=&quot;Email&quot;&gt;
  &lt;input type=&quot;password&quot;&gt;
  &lt;input type=&quot;submit&quot;&gt;
&lt;/form&gt;
</code></pre>

<p>Now you can specify that this specific page has a custom layout like this:</p>

<pre><code class="ruby">page &quot;/login.html&quot;, :layout =&gt; &quot;admin&quot;
</code></pre>

<p>Which would make the login page use the admin layout. As an alternative to
specifying everything in the <code>config.rb</code>, you can set the layout on individual
pages in their template file using <a href="/basics/frontmatter/">Frontmatter</a>. Here is an example
<code>login.html.erb</code> page which specifies its own layout.</p>

<pre><code class="html">---
layout: admin
---

&lt;h1&gt;Login&lt;/h1&gt;
&lt;form&gt;
  &lt;input type=&quot;text&quot; placeholder=&quot;Email&quot;&gt;
  &lt;input type=&quot;password&quot;&gt;
  &lt;input type=&quot;submit&quot;&gt;
&lt;/form&gt;
</code></pre>

<h2 id="nested-layouts">Nested Layouts</h2>

<p>Nested layouts allow you to create a stack of layouts. The easiest to
understand use-case is the <code>middleman-blog</code> extension. Blog Articles are a
subset of the entire site&#39;s content. They should contain additional content and
structure, but should still end up wrapped by the site-wide structure (header,
footer, etc).</p>

<p>Here&#39;s what a simple default layout might look like:</p>

<pre><code class="html">&lt;html&gt;
  &lt;body&gt;
    &lt;header&gt;Header&lt;/header&gt;
    &lt;%= yield %&gt;
    &lt;footer&gt;Footer&lt;/footer&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Let&#39;s say we have a blog article <code>blog/my-article.html.markdown</code>. I could then
tell all the blog articles to use a <code>article_layout</code> layout instead of the
default <code>layout</code>. In <code>config.rb</code>:</p>

<pre><code class="ruby">page &quot;blog/*&quot;, :layout =&gt; :article_layout
</code></pre>

<p>That <code>layouts/article_layout.erb</code> layout would look like this</p>

<pre><code class="html">&lt;% wrap_layout :layout do %&gt;
  &lt;article&gt;
    &lt;%= yield %&gt;
  &lt;/article&gt;
&lt;% end %&gt;
</code></pre>

<p>Like a normal layout, <code>yield</code> is where the resulting template content is
placed. In this example, you&#39;ve end up with the following output:</p>

<pre><code class="html">&lt;html&gt;
  &lt;body&gt;
    &lt;header&gt;Header&lt;/header&gt;
    &lt;article&gt;
      &lt;!-- Contents of my template/blog article --&gt;
    &lt;/article&gt;
    &lt;footer&gt;Footer&lt;/footer&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<h2 id="disabling-layouts-entirely">Disabling Layouts Entirely</h2>

<p>In some cases, you may not want to use a layout at all. This can be
accomplished by setting the default layout to false in your <code>config.rb</code>:</p>

<pre><code class="ruby">set :layout, false

# Or for an individual file:
page &#39;/foo.html&#39;, :layout =&gt; false
</code></pre>

    </main>
  </div>

    <footer class="footer" data-waypoint="footer" role="contentinfo">
  <div class="wrap-container">
    <div class="footer-column">
      <article class="footer-site-information">
        <p>
          &copy; 2011&ndash;2015 <a href="//awardwinningfjords.com">Thomas Reynolds</a>
        </p>
        <p class="footer-open-source-credit">
          Maintained by the <a href="//github.com/orgs/middleman/people">core team</a> with help from
            <a href="//github.com/middleman/middleman/graphs/contributors">contributors</a>.
        </p>
      </article>
      <article class="footer-contact">
        <ul class="footer-contact-list">
          <li class="footer-contact-list-item twitter-link">
            <a href="//twitter.com/middlemanapp">@middlemanapp</a>
          </li>
          <li class="footer-contact-list-item github-link">
            <a href="//github.com/middleman/middleman">GitHub</a>
          </li>
        </ul>
      </article>
    </div>
    <div class="footer-column footer-right">
      <a href="https://formkeep.com?utm_source=middleman">
        <span class="footer-formkeep-logo"></span>
      </a>
      <p class="footer-credit">
        FormKeep provides

        <a href="https://formkeep.com/?utm_source=middleman">form endpoints for Middleman sites</a>.
      </p>
    </div>
  </div>
</footer>

    <script src="/javascripts/site.js"></script>
    <script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-90027-21']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
<script>
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '4ef39d56613f5d017b000004');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script>
  </body>
</html>
